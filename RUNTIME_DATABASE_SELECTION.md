# üîÑ –ù–æ–≤–∏–π –ø—ñ–¥—Ö—ñ–¥: Runtime Database Selection

## ‚ùå –°—Ç–∞—Ä–∞ –ø—Ä–æ–±–ª–µ–º–∞:
Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–∫–ª–∞–¥–∞—î —Ñ–∞–π–ª–∏, –∑–º—ñ–Ω—é—é—á–∏ `DATABASE_URL` –Ω–∞ `URL_–ë–ê–ó–ò_–î–ê–ù–ò–•`, —â–æ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ –ø–æ–º–∏–ª–∫–∏ P1012.

## ‚úÖ –ù–æ–≤–µ —Ä—ñ—à–µ–Ω–Ω—è:
–ü–æ–≤–Ω—ñ—Å—Ç—é –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ –ª–æ–≥—ñ–∫—É –≤–∏–±–æ—Ä—É –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –≤ **runtime** –∑–∞–º—ñ—Å—Ç—å **build time**.

## üîß –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î:

### 1. **–°—Ç–∞—Ç–∏—á–Ω–∏–π schema.prisma**
–¢–µ–ø–µ—Ä —Ñ–∞–π–ª `prisma/schema.prisma` **–Ω—ñ–∫–æ–ª–∏ –Ω–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è** –ø—ñ–¥ —á–∞—Å –∑–±—ñ—Ä–∫–∏:
```prisma
datasource db {
  provider = "sqlite"  // –ó–∞–≤–∂–¥–∏ SQLite –≤ schema
  url      = env("DATABASE_URL")
}
```

### 2. **Runtime –≤–∏–±—ñ—Ä –±–∞–∑–∏**
Prisma –∫–ª—ñ—î–Ω—Ç –¥–∏–Ω–∞–º—ñ—á–Ω–æ –æ–±–∏—Ä–∞—î –±–∞–∑—É –¥–∞–Ω–∏—Ö —á–µ—Ä–µ–∑ `datasources` –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é:

```typescript
// src/lib/prisma.ts
new PrismaClient({
  datasources: {
    db: {
      url: databaseUrl  // Runtime –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è URL
    }
  }
})
```

### 3. **Environment-based –ª–æ–≥—ñ–∫–∞**
```typescript
if (isProduction && DATABASE_URL.startsWith('postgresql:')) {
  // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ PostgreSQL –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞
} else {
  // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ SQLite –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏
}
```

## üéØ –ü–µ—Ä–µ–≤–∞–≥–∏ –Ω–æ–≤–æ–≥–æ –ø—ñ–¥—Ö–æ–¥—É:

1. **üîí –ë–µ–∑–ø–µ–∫–∞**: –§–∞–π–ª–∏ —Å—Ö–µ–º–∏ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –∑–º—ñ–Ω—é—é—Ç—å—Å—è
2. **üö´ –ë–µ–∑ –ø–µ—Ä–µ–∫–ª–∞–¥—É**: Vercel –Ω–µ –º–æ–∂–µ –ø–µ—Ä–µ–∫–ª–∞—Å—Ç–∏ runtime –∫–æ–¥  
3. **üîÑ –ì–Ω—É—á–∫—ñ—Å—Ç—å**: –õ–µ–≥–∫–æ –ø–µ—Ä–µ–º–∏–∫–∞—Ç–∏ –º—ñ–∂ –±–∞–∑–∞–º–∏
4. **üêõ –°—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å**: –ú–µ–Ω—à–µ –ø–æ–≤–µ—Ä—Ö–æ–Ω—å –¥–ª—è –ø–æ–º–∏–ª–æ–∫

## üìã –ù–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:

### Build –ø—Ä–æ—Ü–µ—Å:
```bash
1. ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è Prisma client (–±–µ–∑ –∑–º—ñ–Ω schema)
2. ‚úÖ Next.js build
3. ‚ùå –ù–Ü–Ø–ö–ò–• –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ–π —Ñ–∞–π–ª—ñ–≤
```

### Runtime –ø—Ä–æ—Ü–µ—Å:
```bash
1. ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ (prod/dev)
2. ‚úÖ –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è DATABASE_URL
3. ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Prisma –∫–ª—ñ—î–Ω—Ç–∞ –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—é –±–∞–∑–æ—é
```

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç:

- ‚úÖ **–ù—ñ—è–∫–∏—Ö –ø–æ–º–∏–ª–æ–∫ P1012** - schema –∑–∞–≤–∂–¥–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π
- ‚úÖ **–ù—ñ—è–∫–æ–≥–æ –ø–µ—Ä–µ–∫–ª–∞–¥—É** - Vercel –Ω–µ —á—ñ–ø–∞—î runtime –∫–æ–¥
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –¥–µ–ø–ª–æ—é** - minimal build script
- ‚úÖ **–ì–Ω—É—á–∫—ñ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ –±–∞–∑–∏

## üîç –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:

–¢–µ–ø–µ—Ä —É –ª–æ–≥–∞—Ö –±—É–¥–µ—Ç–µ –±–∞—á–∏—Ç–∏:
```
Prisma client initialization: {
  environment: 'production',
  vercelEnv: 'production', 
  isProduction: true,
  databaseUrl: '***CONFIGURED***'
}
```

## üì¶ –ö–æ–º–∞–Ω–¥–∏:

```bash
yarn build           # Minimal build (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π)
yarn build:ultra     # Ultra-safe build (—è–∫—â–æ minimal –Ω–µ –ø—Ä–∞—Ü—é—î)
yarn build:emergency # Emergency fix
```

## üéâ –¶–µ–π –ø—ñ–¥—Ö—ñ–¥ –ø–æ–≤–∏–Ω–µ–Ω –æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤–∏—Ä—ñ—à–∏—Ç–∏ –ø—Ä–æ–±–ª–µ–º—É!